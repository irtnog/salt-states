{%- from "satosa/map.jinja" import satosa_aws_attribute_release with context -%}
## NOTE: from the satosa_microservices distribution
module: aws_attribute_release.AwsAttributeRelease
name: AwsAttributeRelease
config:
  ## Only activate this plugin for the following SPs (optional).
  aws_entity_ids:
    {{ satosa_aws_attribute_release.pop('aws_entity_ids')|yaml(False)|indent }}

  ## Obtain the value of the AWS Role Session Name attribute from this
  ## SATOSA internal attribute (defaults to "cn").
  role_session_name_source:
    {{ satosa_aws_attribute_release.pop('role_session_name_source')|yaml_encode }}

  ## Specify the maximum time a user can access the AWS Management
  ## Console before having to request new credentials (defaults to
  ## None).
  session_duration:
    {{ satosa_aws_attribute_release.pop('session_duration')|yaml_encode }}

{#- TODO: prettier-print the YAML #}
{%- for aws_account_id, aws_account_settings in satosa_aws_attribute_release|dictsort %}
  {{ aws_account_id|yaml_encode }}:
    {{ aws_account_settings|yaml(False)|indent }}
{%- endfor %}
