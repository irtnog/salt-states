{%- from "satosa/map.jinja" import satosa_primary_identifier with context -%}
module: primary_identifier.PrimaryIdentifier
name: PrimaryIdentifier
config:
  ordered_identifier_candidates:
    {{ satosa_primary_identifier.pop('ordered_identifier_candidates')|yaml(False)|indent }}
  primary_identifier:
    {{ satosa_primary_identifier.pop('primary_identifier')|yaml_encode }}
  on_error:
    {{ satosa_primary_identifier.pop('on_error')|yaml_encode }}
  clear_input_attributes:
    {{ satosa_primary_identifier.pop('clear_input_attributes')|yaml_encode }}

{%- for entity_id, settings in satosa_primary_identifier|dictsort %}

{%    if loop.first -%}
  ## Per-IdP overrides:
{%    endif -%}
  {{ entity_id|yaml_encode }}:
    {{ settings|yaml(False)|indent }}

{%- endfor %}
