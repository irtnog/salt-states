{%- macro generate_boto_states(state_module,
                               source_dict,
                               state_id_prefix='',
                               state_id_suffix='',
                               present_function='present',
                               absent_function='absent',
                               no_op_comment='') %}
{%-   for name, settings in source_dict|default({})|dictsort %}
{{ state_id_prefix }}{{ name }}{{ state_id_suffix }}:
{%-     if settings is mapping %}
  {{ state_module }}.{{ present_function }}:
    - name:
        {{ name }}
{%-       for kwarg, value in settings|dictsort %}
    - {{ kwarg }}:
        {{ value|yaml_encode if value is string
                             or value is number
                             or value is sameas true
                             or value is sameas false
                             or value is sameas None else
           value|yaml }}
{%-       endfor %}
{%-     else %}
  {{ state_module }}.{{ absent_function }}:
    - name:
        {{ name }}
{%-     endif %}
{%-   else %}
### NB: {{ no_op_comment }}
{%-   endfor %}
{%- endmacro %}
